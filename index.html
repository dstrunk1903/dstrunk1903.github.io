<!DOCTYPE html>
<html lang="en">
<head>
    <!-- <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CARACAL Weather Report</title> -->
    <meta charset="UTF-8"> 
    <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <meta name="apple-mobile-web-app-capable" content="yes"> 
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <title>Caracal Weather Services - Current Weather Report</title> 

    <!-- TODO: Implement homescreen icon -->
    <!-- <link rel="icon" type="image/x-icon" href="/images/favicon.ico"> 
    <link rel="apple-touch-icon" href="images/apple-touch-icon-iphone60x60.png"> 
    <link rel="apple-touch-icon" sizes="60x60" href="images/apple-touchicon-ipad-76x76.png"> 
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touchicon-iphone-retina-120x120.png"> 
    <link rel="apple-touch-icon" sizes="144x144" href="images/apple-touchicon-ipad-retina-152x152.png">  -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrapicons@1.11.3/font/bootstrap-icons.css">
</head>
<body class="bg-dark">
    <div class="d-flex justify-content-center align-items-center min-vh-100">
        <form class="card col-12 col-md-10 col-lg-8 col-xl-4 col-xxl-4" id="frmWeather">
            <div class="card-body" id="divCardBody">
                <h1 class="text-center text-primary mb-0">Caracal Weather Services</h1>
                <h3 class="text-center mb-0">Current Weather Report</h3>
                <hr>
            </div>
        </form>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
        const strBaseURL = 'https://api.open-meteo.com/v1/forecast?latitude=36.1628&longitude=-85.5016&current=temperature_2m,relative_humidity_2m,weather_code&temperature_unit=fahrenheit&timezone=America%2FChicago&forecast_days=1'
        async function readWeather(){
            try {
                const objResponse = await fetch(strBaseURL, {
                    method:'GET',
                    headers: {
                        'Content-Type':'application/json'
                    }
                })

                if(!objResponse.ok){
                    throw new Error(`HTTP Error Status:${objResponse.status}`)
                }

                const objData = await objResponse.json()

                console.log(objData)

                document.querySelector('#frmWeather').innerHTML += `<p class="text-center mb-4">Current Temperature: ${objData.current.temperature_2m}</p>`
                document.querySelector('#frmWeather').innerHTML += `<p class="text-center mb-4">Current Humidity: ${objData.current.relative_humidity_2m}</p>`
                document.querySelector('#frmWeather').innerHTML += `<p class="text-center mb-4">Current Weather Code: ${objData.current.weather_code}</p>`

            } catch(objError){
                console.log('Error fetching objData',objError)
            }
        }

        readWeather()
    </script>
</body>
</html>